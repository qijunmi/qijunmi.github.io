
<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Lesson 1: Hello World</title>
	
		<meta name="description" content="Drawing Our First Image">
	
    <meta name="author" content="Will Usher">

	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
	<![endif]-->

	<link href="/assets/bootstrap3/css/bootstrap.min.css" rel="stylesheet">
	<link href="/assets/syntax.css" rel="stylesheet">
	<link href="/assets/custom.css" rel="stylesheet">
	<link rel="shortcut icon" href="/assets/img/identicon.ico">
	<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
</head>
<body>
	<div class="navbar navbar-inverse navbar-static-top" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="sr-only">Toggle nav</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="/">Will Usher</a>
			</div>
			<div class="navbar-collapse collapse">
				<ul class="nav navbar-nav navbar-right">
					
					
					


  
    
      
        
      	<li><a href="/pages/sdl2">SDL2 Tutorials</a></li>
      	
      
    
  
    
      
        
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
        
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  





				</ul>
			</div><!--/.nav-collapse -->
		</div>
	</div>

	<div class="container content">
			
<div class="page-header">
	<h1>Lesson 1: Hello World <small>Drawing Our First Image</small></h1>
</div>

<div class="col-md-12">
	<div class="col-md-9">
		<p>In this lesson we&#39;ll learn how to open a window, create a rendering context and draw
an image we&#39;ve loaded to the screen. Grab the BMP we&#39;ll be drawing below and save it somewhere in your
project and let&#39;s get started!</p>

<!--more-->

<p><a href="https://github.com/Twinklebear/TwinklebearDev-Lessons/raw/master/res/Lesson1/hello.bmp">
    <img class="centered" width="400" height="auto" 
        src="https://github.com/Twinklebear/TwinklebearDev-Lessons/raw/master/res/Lesson1/hello.bmp">
</a></p>

<h2>Starting SDL</h2>

<p>To use SDL we first need to initialize the various SDL subsystems we want to use. This is done through
<a href="http://wiki.libsdl.org/moin.fcg/SDL_Init"><code>SDL_Init</code></a> which takes a set of 
<a href="http://wiki.libsdl.org/moin.fcg/SDL_Init#Remarks">flags</a> or&#39;d together specifying the subsystems we&#39;d like to initialize.
For now we&#39;ll just say we want everything but you can change this if you like. The bare minimum needed for
this lesson is <code>SDL_INIT_VIDEO</code>. If everything goes alright
<code>SDL_Init</code> will return 0, if not we&#39;ll want to print out the error and quit.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">if</span> <span class="p">(</span><span class="n">SDL_Init</span><span class="p">(</span><span class="n">SDL_INIT_EVERYTHING</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">){</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;SDL_Init Error: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">SDL_GetError</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p><br /></p>

<h2>Opening a Window</h2>

<p>We&#39;ll need a window to display our render in, we can create one with 
<a href="http://wiki.libsdl.org/moin.fcg/SDL_CreateWindow"><code>SDL_CreateWindow</code></a> which takes a title for the window,
the x and y position to create it at, the window width and height and some <a href="http://wiki.libsdl.org/moin.fcg/SDL_WindowFlags">flags</a> to set properties of the window and returns an <code>SDL_Window*</code>. This pointer will be <code>NULL</code> if anything went
wrong when creating the window. If an error does occur we need to clean up SDL before exiting the program.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">SDL_Window</span> <span class="o">*</span><span class="n">win</span> <span class="o">=</span> <span class="n">SDL_CreateWindow</span><span class="p">(</span><span class="s">&quot;Hello World!&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">640</span><span class="p">,</span> <span class="mi">480</span><span class="p">,</span> <span class="n">SDL_WINDOW_SHOWN</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">win</span> <span class="o">==</span> <span class="k">nullptr</span><span class="p">){</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;SDL_CreateWindow Error: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">SDL_GetError</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">SDL_Quit</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p><br /></p>

<h2>Creating a Renderer</h2>

<p>Now we can create a renderer to draw to the window using <a href="http://wiki.libsdl.org/moin.fcg/SDL_CreateRenderer"><code>SDL_CreateRenderer</code></a>. This function takes the window to associate the renderer with, the index of the rendering driver
to be used (or -1 to select the first that meets our requirements) and various 
<a href="http://wiki.libsdl.org/moin.fcg/SDL_RendererFlags">flags</a> used to specify what sort of renderer we want.
Here we&#39;re requesting a hardware accelerated renderer with vsync enabled. We&#39;ll get back an <code>SDL_Renderer*</code> which will be
<code>NULL</code> if something went wrong. If an error does occur we need to clean up anything we&#39;ve previously created and quit
SDL before exiting the program.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">SDL_Renderer</span> <span class="o">*</span><span class="n">ren</span> <span class="o">=</span> <span class="n">SDL_CreateRenderer</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">SDL_RENDERER_ACCELERATED</span> <span class="o">|</span> <span class="n">SDL_RENDERER_PRESENTVSYNC</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ren</span> <span class="o">==</span> <span class="k">nullptr</span><span class="p">){</span>
    <span class="n">SDL_DestroyWindow</span><span class="p">(</span><span class="n">win</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;SDL_CreateRenderer Error: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">SDL_GetError</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">SDL_Quit</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p><br /></p>

<h2>Loading a Bitmap Image</h2>

<p>To render a BMP image we&#39;ll need to load it into memory and then onto the rendering platform we&#39;re 
using (in this case the GPU). We can load the image with <a href="http://wiki.libsdl.org/moin.fcg/SDL_LoadBMP"><code>SDL_LoadBMP</code></a>
which gives us back a <a href="http://wiki.libsdl.org/moin.fcg/SDL_Surface"><code>SDL_Surface*</code></a> that we can then take and upload to a <a href="http://wiki.libsdl.org/moin.fcg/SDL_Texture"><code>SDL_Texture</code></a> that the renderer is able to use.</p>

<p>SDL<em>LoadBMP takes the filepath of our image, which you should change to match your project structure, and gives us back
an `SDL</em>Surface*<code>or</code>NULL` if something went wrong.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">imagePath</span> <span class="o">=</span> <span class="n">getResourcePath</span><span class="p">(</span><span class="s">&quot;Lesson1&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;hello.bmp&quot;</span><span class="p">;</span>
<span class="n">SDL_Surface</span> <span class="o">*</span><span class="n">bmp</span> <span class="o">=</span> <span class="n">SDL_LoadBMP</span><span class="p">(</span><span class="n">imagePath</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="k">if</span> <span class="p">(</span><span class="n">bmp</span> <span class="o">==</span> <span class="k">nullptr</span><span class="p">){</span>
    <span class="n">SDL_DestroyRenderer</span><span class="p">(</span><span class="n">ren</span><span class="p">);</span>
    <span class="n">SDL_DestroyWindow</span><span class="p">(</span><span class="n">win</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;SDL_LoadBMP Error: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">SDL_GetError</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">SDL_Quit</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p><br /></p>

<p>With the image loaded we can now upload it to the renderer using <a href="http://wiki.libsdl.org/moin.fcg/SDL_CreateTextureFromSurface"><code>SDL_CreateTextureFromSurface</code></a>. We pass in the rendering context to upload to and the image in memory (the <code>SDL_Surface</code>)
and get back the loaded texture, if something went wrong we&#39;ll get back <code>NULL</code>. We&#39;re also done with the original
surface at this point so we&#39;ll free it now.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">SDL_Texture</span> <span class="o">*</span><span class="n">tex</span> <span class="o">=</span> <span class="n">SDL_CreateTextureFromSurface</span><span class="p">(</span><span class="n">ren</span><span class="p">,</span> <span class="n">bmp</span><span class="p">);</span>
<span class="n">SDL_FreeSurface</span><span class="p">(</span><span class="n">bmp</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">tex</span> <span class="o">==</span> <span class="k">nullptr</span><span class="p">){</span>
    <span class="n">SDL_DestroyRenderer</span><span class="p">(</span><span class="n">ren</span><span class="p">);</span>
    <span class="n">SDL_DestroyWindow</span><span class="p">(</span><span class="n">win</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;SDL_CreateTextureFromSurface Error: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">SDL_GetError</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">SDL_Quit</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p><br /></p>

<h2>Drawing the Texture</h2>

<p>All that&#39;s left to do is get our texture on the screen! First we&#39;ll <a href="http://wiki.libsdl.org/moin.fcg/SDL_RenderClear">clear</a>
the renderer, then <a href="http://wiki.libsdl.org/moin.fcg/SDL_RenderCopy">render our texture</a> and then 
<a href="http://wiki.libsdl.org/moin.fcg/SDL_RenderPresent">present</a> the updated screen to show the result. Since
we want to render the whole image and have it stretch to fill the screen we&#39;ll pass <code>NULL</code> as the source
and destination rectangles for <code>SDL_RenderCopy</code>. We&#39;ll also
want to keep the window open for a bit so we can see the result before the program exits, so we&#39;ll add in a call
to <a href="http://wiki.libsdl.org/moin.fcg/SDL_Delay"><code>SDL_Delay</code></a>.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">SDL_RenderClear</span><span class="p">(</span><span class="n">ren</span><span class="p">);</span>
<span class="n">SDL_RenderCopy</span><span class="p">(</span><span class="n">ren</span><span class="p">,</span> <span class="n">tex</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="n">SDL_RenderPresent</span><span class="p">(</span><span class="n">ren</span><span class="p">);</span>

<span class="n">SDL_Delay</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span></code></pre></div>

<p><br /></p>

<h2>Cleaning Up</h2>

<p>Before we exit we&#39;ve got to destroy all the objects we created through the various <code>SDL_DestroyX</code> functions and 
quit SDL. <strong>Error handling note:</strong> previously in the program we may have encountered an error and exited early,
in which case we&#39;d have to destroy any SDL objects we had created and quit SDL to properly clean up before exiting.
This part of the error handling is omitted from the lessons since they&#39;re such small examples
and it helps keep the code a bit shorter, but in a real world program
proper error handling and clean up is absolutely required.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">SDL_DestroyTexture</span><span class="p">(</span><span class="n">tex</span><span class="p">);</span>
<span class="n">SDL_DestroyRenderer</span><span class="p">(</span><span class="n">ren</span><span class="p">);</span>
<span class="n">SDL_DestroyWindow</span><span class="p">(</span><span class="n">win</span><span class="p">);</span>
<span class="n">SDL_Quit</span><span class="p">();</span></code></pre></div>

<p><br /></p>

<h2>End of Lesson</h2>

<p>If everything went well you should see the image you loaded render over the entire window, wait for 2s and then exit.
If you have any problems, make sure you&#39;ve got SDL installed and your project configured properly as discussed in 
<a href="/sdl2%20tutorials/2013/08/15/lesson-0-setting-up-sdl">Lesson 0: Setting up SDL</a>, or post a question below.</p>

<p>I&#39;ll see you again soon in <a href="/sdl2%20tutorials/2014/08/01/postscript-1-easy-cleanup">Postscript 1: Easy Cleanup</a>!</p>

	</div>
	<div class="col-md-3">
		<h4><a href="/pages/sdl2/">Tutorial Index</a></h4>
		<h4>Helpful Links</h4>
		<a href="http://wiki.libsdl.org/moin.fcg/FrontPage">SDL Documentation</a>
		<br />
		<a href="http://forums.libsdl.org/">SDL Forums</a>
		<br />
		<a href="irc://irc.freenode.net/SDL">IRC: #SDL on freenode</a>
		<br />
		<a href="http://en.cppreference.com/w/">C++ Reference</a>
		<br />
		<a href="https://github.com/Twinklebear/TwinklebearDev-Lessons">Code on Github</a>
		<p>Published: 17 August 2013
	</div>
</div>
<div class="col-md-12 comments">
	


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'twinklebeargithub'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




</div>




	</div>

	
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="/assets/bootstrap3/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
	</script>
</body>
</html>



